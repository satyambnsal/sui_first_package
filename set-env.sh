echo "Setting ENVS"
export PCR0=566b27dd57d5595ed526ddbd3ed3f8b82f128853fa6550013f57648f71c81305b5f6aded6e4cc2363e7506ed92cb1865
export PCR1=566b27dd57d5595ed526ddbd3ed3f8b82f128853fa6550013f57648f71c81305b5f6aded6e4cc2363e7506ed92cb1865
export PCR2=21b9efbc184807662e966d34f390821309eeac6802309798826296bf3e8bec7c10edb30948c90ba67310f7b964fc500a

export ENCLAVE_PACKAGE_ID=0xa07d553a0514cbdf8c9e85be4ada3a7a397ac481cea9be7c175e9400f45f6dc8

# record CAP_OBJECT_ID (owned object of type Cap), ENCLAVE_CONFIG_OBJECT_ID (shared object), EXAMPLES_PACKAGE_ID (package containing weather module) as env var from publish output

export CAP_OBJECT_ID=0xf49bf88e5f152d6c55b6073594b3154f98cdb31062be2e9f80391d3a95e4b89e
export ENCLAVE_CONFIG_OBJECT_ID=0x1f08cc29c383f0188033f8d3df0b025dc1ba8aee8124d6337d0130a5ad39d535
export EXAMPLES_PACKAGE_ID=0x558c42c6e84d2db7dce84ab057a58f2601f1cea725362c5378294c26c0e0ba1b

# record the deployed enclave url, e.g. http://<PUBLIC_IP>:3000
export ENCLAVE_URL=http://54.81.11.64:3000
export MODULE_NAME=sentinel
export OTW_NAME=SENTINEL
export ENCLAVE_OBJECT_ID=0xa6604721d223286d02bf354d62349ae968964b6997fe83208643857638fa027b

echo "EXAMPLES_PACKAGE_ID": $EXAMPLES_PACKAGE_ID
echo $ENCLAVE_PACKAGE_ID
echo $CAP_OBJECT_ID
echo $ENCLAVE_CONFIG_OBJECT_ID
echo 0x$PCR0
echo 0x$PCR1
echo 0x$PCR2
echo $MODULE_NAME
echo $OTW_NAME
echo $ENCLAVE_URL
echo "ENCLAVE_OBJECT_ID": $ENCLAVE_OBJECT_ID

sh register_agent.sh \
  $EXAMPLES_PACKAGE_ID \
  $MODULE_NAME \
  $OTW_NAME \
  $ENCLAVE_OBJECT_ID \
  "ceef22f02896d7ca6df0a57d8529c0d45a067c500da4369c90c12c6c7531e65ee18acb18df45035eaa5eb6187da1edd73cf80da1df5b591d4545e7ca100cca01" \
  1747900872898 \
  "f99aad42-aeba-4e93-bba5-e073203c4b32"
